<?xml version="1.0" encoding="UTF-8"?>
<svg width="241px" height="71px" viewBox="0 0 241 71" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <desc></desc>
    <defs></defs>
    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <g id="e.on-logo" fill="#EA1D09">
            <path d="M133.6201,54.8958 C137.3971,50.9608 140.6561,33.1318 140.6561,29.9128 C140.6561,27.6238 140.4921,26.8298 136.1811,26.8298 C134.4771,26.8298 131.9431,27.0948 130.7961,28.6828 C126.4971,34.6358 123.6471,49.5208 123.6471,53.6598 C123.6471,56.4868 125.6121,56.3068 128.2361,56.3068 C129.7641,56.3068 132.2281,56.3458 133.6201,54.8958 Z M141.9161,13.4148 C152.0421,13.4148 164.5981,15.0038 164.5981,26.0358 C164.5981,32.8308 157.8891,47.7498 155.7331,51.8948 C146.7211,69.2228 134.6811,69.1048 121.0871,69.1048 C114.4451,69.1048 99.6411,69.1818 99.6411,56.7488 C99.6411,51.1878 104.4871,40.9958 108.4671,31.3318 C110.1601,27.2218 117.3691,13.4148 141.9161,13.4148 Z" id="Fill-1"></path>
            <path d="M30.1836,31.7718 C31.6146,30.3408 45.8886,17.9158 54.0126,17.9158 C56.5096,17.9158 56.6606,22.4898 56.6606,25.6828 C56.6606,31.6538 56.0736,32.7428 49.6006,32.7428 L31.3306,32.7428 C29.9166,32.7428 29.1246,32.8318 30.1836,31.7718 M25.7706,45.8048 C25.7706,45.8048 40.8686,46.2468 48.3646,46.2468 L55.8666,46.2468 C66.5426,46.2468 76.1646,43.0028 76.1646,27.3588 C76.1646,20.0368 74.4496,-0.0002 61.8686,-0.0002 C47.8976,-0.0002 -0.0004,18.6928 -0.0004,43.5108 C-0.0004,58.3208 20.3686,70.6048 42.9806,70.6048 C57.9996,70.6048 75.9006,61.9048 75.9006,56.3958 C75.9006,53.5708 68.5916,52.7778 63.6326,52.7778 C58.5256,52.7778 50.5706,53.6948 50.5706,53.6948 C49.6006,54.7188 45.1386,59.0438 38.2146,59.0438 C29.4236,59.0438 23.6526,51.3478 23.6526,46.2468 C23.6526,45.5398 24.5586,45.7808 25.7706,45.8048" id="Fill-3"></path>
            <path d="M91.875,31.8607 C88.008,31.8607 84.091,32.4057 81.902,37.4217 C81.666,37.9637 79.872,41.6437 79.872,43.7757 C79.872,46.5307 81.542,48.2767 86.403,48.2767 C89.644,48.2767 94.246,47.5747 96.001,43.2447 C96.278,42.5637 98.23,37.9497 98.23,36.2737 C98.23,33.2247 95.153,31.8607 91.875,31.8607" id="Fill-6"></path>
            <path d="M222.1914,36.8094 C222.1914,40.8654 215.5504,59.6394 213.8014,64.8524 C213.5034,65.7404 213.9434,66.3454 214.2974,66.6274 C216.0084,67.9964 219.5174,69.1054 224.1714,69.1054 C226.7434,69.1054 228.7274,68.7194 229.7634,65.9934 C231.3394,61.8444 240.9454,34.1994 240.9454,26.1254 C240.9454,21.3144 238.6704,15.0914 228.5844,15.0914 C217.1114,15.0914 204.1364,27.3584 196.9894,27.3584 C192.7534,27.3584 192.6084,22.8584 192.6084,21.5354 C192.6084,18.4704 192.5934,18.4984 192.5934,18.4984 C190.7674,17.5184 187.1254,17.3854 185.2514,17.3854 C182.6954,17.3854 180.8604,17.8124 180.3004,17.9004 C179.0964,18.0884 178.8654,18.5314 178.6304,19.0624 C173.0844,31.6524 165.0844,54.8824 163.5394,61.1614 L162.6954,64.5934 C162.3974,65.8044 162.4464,66.3784 163.4504,66.8984 C163.7724,67.0654 167.1574,68.7514 170.3354,68.7514 C172.9034,68.7514 175.1014,68.3984 176.6014,66.7224 C181.1864,61.5964 205.8784,32.9194 219.3174,32.9194 C221.5344,32.9194 222.1914,34.5884 222.1914,36.8094" id="Fill-8"></path>
        </g>
    </g>
</svg>

![logo-main](https://github.com/user-attachments/assets/5841ec01-81c9-4c25-8373-b09d9ba11fe6)

# E-ON România - Integrare pentru Home Assistant 🏠🇷🇴

Această integrare pentru Home Assistant oferă **monitorizare completă** a datelor contractuale și a indexurilor de consum pentru utilizatorii E-ON România. Integrarea este configurabilă prin interfața UI și permite afișarea datelor despre contract, citirea indexurilor curente și arhivarea datelor istorice. 🚀

## 🌟 Caracteristici

### Senzor `Date contract`:
  - **🔍 Monitorizare Generală**:
      - Afișează informații detaliate despre contractul de furnizare energie.
  - **📊 Atribute disponibile**:
      - **Cod încasare**: Codul unic al contractului.
      - **Cod loc de consum (NLC)**: Identificatorul locației de consum.
      - **CLC - Cod punct de măsură**: Codul unic al punctului de măsurare.
      - **Operator de Distribuție (OD)**: Numele operatorului de distribuție.
      - **Prețuri detaliate**:
        - **Preț final (fără TVA)**: Valoarea finală fără TVA.
        - **Preț final (cu TVA)**: Valoarea finală inclusiv TVA.
        - **Preț furnizare**: Costul pentru furnizarea energiei.
        - **Tarif reglementat distribuție**: Costul distribuției energiei.
        - **Tarif reglementat transport**: Costul transportului energiei.
      - **PCS (Potențial caloric superior)**: Valoarea calorică superioară a energiei.
      - **Adresă consum**: Adresa locației de consum.
      - **Verificare instalație**: Data următoarei verificări tehnice a instalației.
      - **Data inițierii reviziei**: Data la care începe următoarea revizie tehnică.
      - **Revizie tehnică**: Data expirării următoarei revizii tehnice.

### Senzor `Index Curent`:
  - **🔍 Monitorizare Date Index**:
      - Afișează informații detaliate despre indexul curent al contorului.
  - **📊 Atribute disponibile**:
      - **Numărul dispozitivului**: ID-ul dispozitivului asociat contorului.
      - **Data de început a citirii**: Data de început a perioadei de citire.
      - **Data de final a citirii**: Data de final a perioadei de citire.
      - **Citirea contorului permisă**: Indică dacă citirea poate fi realizată în perioada curentă.
      - **Permite modificarea citirii**: Indică dacă indexul citit poate fi modificat.
      - **Dispozitiv inteligent**: Specifică dacă dispozitivul este un contor inteligent.
      - **Tipul citirii curente**: Tipul citirii efectuate (de exemplu, autocitire).
      - **Citire anterioară**: Valoarea minimă a citirii anterioare.
      - **Ultima citire validată**: Ultima valoare validată a citirii.
      - **Index propus pentru facturare**: Valoarea indexului propus pentru facturare.
      - **Trimis la**: Data și ora la care a fost transmisă ultima citire.
      - **Poate fi modificat până la**: Data și ora până la care citirea poate fi modificată.

### Senzor `Arhivă`:
- **📚 Date Istorice**:
  - Afișează indexurile lunare pentru fiecare an disponibil.
- **📊 Atribute disponibile**:
  - **An**: Anul pentru care se afișează datele.
  - **Indexuri lunare**: Indexurile consumului pentru fiecare lună.

---

## ⚙️ Configurare

### 🛠️ Interfața UI:
1. Adaugă integrarea din meniul **Setări > Dispozitive și Servicii > Adaugă Integrare**.
2. Introdu datele contului E-ON:
   - **Nume utilizator**: username-ul contului tău E-ON.
   - **Parolă**: parola asociată contului tău.
   - ~~**Cod încasare**: dacă codul este format din 10 cifre, de exemplu `2100023241`, trebuie să adaugi două zerouri la început. Rezultatul final ar trebui să fie `002100023241`.~~
   - **Cod încasare**: Se găsește pe factura ta
     - Nu mai este nevoie să introduci manual 00 înaintea codului de încasare! Dacă codul tău este format din 10 cifre (de exemplu `2100023241`), funcția de corectare implementată va adăuga automat două zerouri la început. Rezultatul final va deveni `002100023241`, astfel încât autentificarea să fie corectă și fără erori.
3. Specifică intervalul de actualizare (implicit: 3600 secunde).

### Observații:
- Verifică datele de autentificare înainte de salvare.
- Asigură-te că formatul codului de încasare este corect pentru a evita problemele de conectare.

---

## 🚀 Instalare

### 💡 Instalare prin HACS:
1. Adaugă [depozitul personalizat](https://github.com/cnecrea/eonromania) în HACS. 🛠️
2. Caută integrarea **E-ON România** și instaleaz-o. ✅
3. Repornește Home Assistant și configurează integrarea. 🔄

### ✋ Instalare manuală:
1. Clonează sau descarcă [depozitul GitHub](https://github.com/cnecrea/eonromania). 📂
2. Copiază folderul `custom_components/eonromania` în directorul `custom_components` al Home Assistant. 🗂️
3. Repornește Home Assistant și configurează integrarea. 🔧

---

## ✨ Exemple de utilizare

### 🔔 Automatizare pentru Index:
Creează o automatizare pentru a primi notificări când indexul curent depășește o valoare specificată.

```yaml
alias: Notificare Index Ridicat
description: Notificare dacă indexul depășește 1000
trigger:
  - platform: numeric_state
    entity_id: sensor.index_curent_002222257503939227
    above: 1000
action:
  - service: notify.mobile_app_your_phone
    data:
      title: "Index Ridicat Detectat! ⚡"
      message: "Indexul curent este {{ states('sensor.index_curent_002222257503939227') }}."
mode: single
```

### 🔍 Card pentru Dashboard:
Afișează datele despre contract, indexuri și arhivă pe interfața Home Assistant.

```yaml
type: entities
title: Monitorizare E-ON România
entities:
  - entity: sensor.date_contract
    name: Date Contract
  - entity: sensor.index_curent_002222257503939227
    name: Index Curent
  - entity: sensor.arhiva_2024
    name: Arhivă 2024
```

---

## 🧑‍💻 Contribuții

Contribuțiile sunt binevenite! Simte-te liber să trimiți un pull request sau să raportezi probleme [aici](https://github.com/cnecrea/eonromania/issues).

---

## 🌟 Suport
Dacă îți place această integrare, oferă-i un ⭐ pe [GitHub](https://github.com/cnecrea/eonromania/)! 😊
